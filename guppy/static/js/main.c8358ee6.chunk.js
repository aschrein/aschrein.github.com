(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t,n){e.exports=n(297)},288:function(e,t,n){},297:function(e,t,n){"use strict";n.r(t);var a=n(16),s=n(17),r=n(19),i=n(18),o=n(20),l=n(1),c=n(110),h=n.n(c),p=n(0),u=n.n(p),_=n(42),g=n.n(_),m=n(111),f=n.n(m),d=(n(288),n(112)),b=n.n(d),y=(n(295),n(296),n(65));var x=n.e(3).then(n.bind(null,299)),v=function(e){function t(e,n){var s;return Object(a.a)(this,t),(s=Object(r.a)(this,Object(i.a)(t).call(this,e,n))).onChange=s.onChange.bind(Object(l.a)(Object(l.a)(s))),s.Execute=s.Execute.bind(Object(l.a)(Object(l.a)(s))),s.PauseResume=s.PauseResume.bind(Object(l.a)(Object(l.a)(s))),s.onResize=s.onResize.bind(Object(l.a)(Object(l.a)(s))),s.setText=s.setText.bind(Object(l.a)(Object(l.a)(s))),s.setClocks=s.setClocks.bind(Object(l.a)(Object(l.a)(s))),s.state={clocks:0},s}return Object(o.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.glContainer.on("resize",this.onResize),this.props.globals().setText=this.setText,this.props.globals().setClocks=this.setClocks}},{key:"onChange",value:function(e){this.text=e}},{key:"onResize",value:function(){}},{key:"PauseResume",value:function(){this.props.globals().wasm&&(this.props.globals().run=!this.props.globals().run)}},{key:"setClocks",value:function(e){this.setState({clocks:e})}},{key:"setText",value:function(e){this.refs.editor.editor.setValue(e)}},{key:"Execute",value:function(){var e=this.props.globals();if(this.props.globals().wasm){this.props.globals().resetGPU();for(var t=this.props.globals().dispatchConfig,n=0;n<e.r_images.length;n++)e.wasm.guppy_put_image(e.r_images[n]);this.props.globals().wasm.guppy_dispatch(this.text,t.group_size,t.groups_count),this.props.globals().run=!0}else console.log("[WARNING] wasm in null")}},{key:"render",value:function(){return u.a.createElement("div",{className:"ace_editor_container"},u.a.createElement("button",{style:{margin:10},onClick:this.Execute},"Execute"),u.a.createElement("button",{style:{margin:10},onClick:this.PauseResume},"Pause/Resume Clocks:",this.state.clocks),u.a.createElement("div",{style:{background:"#cccccc",margin:10}},u.a.createElement("p",{style:{margin:5}},"Setup example"),u.a.createElement("button",{style:{border:1},onClick:this.props.globals().setupRaymarching},"RayMarching"),u.a.createElement("button",{style:{border:1},onClick:this.props.globals().setupBranch_1},"branch_1"),u.a.createElement("button",{style:{border:1},onClick:this.props.globals().setupBranch_2},"branch_2"),u.a.createElement("button",{style:{border:1},onClick:this.props.globals().setupBranch_3},"branch_3"),u.a.createElement("button",{style:{border:1},onClick:this.props.globals().setupBranch_4},"branch_4")),u.a.createElement(b.a,{value:this.text,ref:"editor",mode:"assembly_x86",theme:"tomorrow_night_eighties",onChange:this.onChange,name:"UNIQUE_ID_OF_DIV",editorProps:{$blockScrolling:!0},autoScrollEditorIntoView:!1,wrapEnabled:!1,height:"700px",width:"512px"}))}}]),t}(u.a.Component),w=function(e){function t(e,n){var s;return Object(a.a)(this,t),(s=Object(r.a)(this,Object(i.a)(t).call(this,e,n))).onChange=s.onChange.bind(Object(l.a)(Object(l.a)(s))),s.onChangeDispatch=s.onChangeDispatch.bind(Object(l.a)(Object(l.a)(s))),s.updateParameters=s.updateParameters.bind(Object(l.a)(Object(l.a)(s))),s}return Object(o.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.globals().updateParameters=this.updateParameters}},{key:"onChange",value:function(e,t,n,a){console.log("onchange",e,t),this.props.globals().gpuConfig[e]=t}},{key:"onChangeDispatch",value:function(e,t,n,a){console.log("onChangeDispatch",e,t),this.props.globals().dispatchConfig[e]=t}},{key:"updateParameters",value:function(){this.refs.gpu_config.setState({data:{root:this.props.globals().gpuConfig}}),this.refs.dispatch_config.setState({data:{root:this.props.globals().dispatchConfig}})}},{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement("p",{style:{color:"white",margin:10}},"GPU Config"),u.a.createElement(y.JSONEditor,{ref:"gpu_config",data:this.props.globals().gpuConfig,onChange:this.onChange}),u.a.createElement("p",{style:{color:"white",margin:10}},"Dispatch config"),u.a.createElement(y.JSONEditor,{ref:"dispatch_config",data:this.props.globals().dispatchConfig,onChange:this.onChangeDispatch}))}}]),t}(u.a.Component),C=function(e){function t(e,n){return Object(a.a)(this,t),Object(r.a)(this,Object(i.a)(t).call(this,e,n))}return Object(o.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return u.a.createElement(f.a,{className:"Markdown",source:"# Toy GPU performace simulator\n* One\n* Two\n  * Three\n___\n```console\n$ kill me\n```"})}}]),t}(u.a.Component),O=function(e){function t(e,n){var s;return Object(a.a)(this,t),(s=Object(r.a)(this,Object(i.a)(t).call(this,e,n))).updateMemory=s.updateMemory.bind(Object(l.a)(Object(l.a)(s))),s}return Object(o.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.globals().updateMemory=this.updateMemory,this.ctx=this.refs.canvas.getContext("2d");var t=function(e){return new Promise(function(t){e.onload=function(){t({img:e,status:"ok"})},e.onerror=function(){return t({img:e,status:"error"})}})},n=this.refs.t0,a=this.refs.t1;Promise.all([t(n),t(a)]).then(function(t){var s=function(t){e.refs.canvas.width=t.width,e.refs.canvas.height=t.height,e.ctx.drawImage(t,0,0);var n=e.ctx.getImageData(0,0,1,1).data;("000000"+function(e,t,n){if(e>255||t>255||n>255)throw"Invalid color component";return(e<<16|t<<8|n).toString(16)}(n[0],n[1],n[2])).slice(-6);var a=e.refs.canvas.toDataURL("image/png");e.props.globals().r_images.push(a)};s(n),s(a),e.props.globals().resetGPU(),e.updateMemory()})}},{key:"updateMemory",value:function(){var e=this.refs.canvas.getContext("2d"),t=new Image,n=this.refs.canvas,a=this.props.globals(),s=this.refs.t0,r=this.refs.t1;t.onload=function(){n.width=512,n.height=1024,e.fillStyle="#222222",e.fillRect(0,0,n.width,n.height);var a=0,i=5,o=function(t){e.font="14px Monaco, monospace",e.textAlign="start",e.textBaseline="top",e.fillStyle="#ffffff",e.fillText(t,a,i),a+=8*t.length};o("s0 = Sampler {WrapMode::WRAP, SampleMode::BILINEAR}"),i+=16,a=0,o("t0 = "),e.drawImage(s,a,i),i+=s.height+10,a=0,o("t1 = "),e.drawImage(r,a,i),i+=r.height+10,a=0,o("u0 = "),e.drawImage(t,a,i)};var i="data:image/png;base64,"+a.wasm.guppy_get_image(0,!1);t.src=i}},{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement("canvas",{ref:"canvas"}),u.a.createElement("img",{style:{display:"none"},ref:"t0",src:"img/lenna.png"}),u.a.createElement("img",{style:{display:"none"},ref:"t1",src:"img/rhino.png"}))}}]),t}(u.a.Component),k=function(e){function t(e,n){var s;return Object(a.a)(this,t),(s=Object(r.a)(this,Object(i.a)(t).call(this,e,n))).neededWidth=4096,s.neededHeight=1024,s.updateCanvas=s.updateCanvas.bind(Object(l.a)(Object(l.a)(s))),s.onResize=s.onResize.bind(Object(l.a)(Object(l.a)(s))),s.scheduleDraw=s.scheduleDraw.bind(Object(l.a)(Object(l.a)(s))),s.remapColors=s.remapColors.bind(Object(l.a)(Object(l.a)(s))),s.colorMap={},s.getRandomColor=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},s}return Object(o.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.draw=!0,this.ctx=this.refs.canvas.getContext("2d"),this.canvas=this.refs.canvas,this.lastClock=0,this.props.glContainer.on("resize",this.onResize),this.globals=this.props.globals,this.globals().updateCanvas=this.scheduleDraw,this.updateCanvas()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateCanvas)}},{key:"onResize",value:function(){this.updateCanvas()}},{key:"scheduleDraw",value:function(){this.draw=!0,this.updateCanvas()}},{key:"remapColors",value:function(){for(var e=this.globals().gpuConfig.waves_per_cu,t=0;t<e;t++)this.colorMap[t]=this.getRandomColor();this.draw=!0,this.updateCanvas()}},{key:"updateCanvas",value:function(){var e=this;if(this.draw){var t=this.globals().gpuConfig.wave_size,n=this.globals().gpuConfig.waves_per_cu,a=this.globals().gpuConfig.CU_count,s=this.globals().gpuConfig.ALU_per_cu;this.globals().gpuConfig.ALU_pipe_len;this.globals().active_mask_history&&(this.neededWidth=this.globals().active_mask_history.length+512,this.neededHeight=(t+4+4*s+14)*this.globals().gpuConfig.CU_count*this.globals().gpuConfig.waves_per_cu+1536),this.draw=!1,this.canvas.width=this.neededWidth,this.canvas.height=this.neededHeight,this.ctx.fillStyle="#222222",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);for(var r=0,i=0,o=function(t,n,a){var s=e.ctx;s.font="10px Monaco, monospace",s.textAlign="start",s.textBaseline="top",s.fillStyle="#ffffff",s.fillText(t,n,a)},l={0:"inactive",1:"active",2:"disabled",3:"stalled",4:"idle"},c={0:"black",1:"white",2:"grey",3:"blue",4:"red"},h=this.ctx,p=0;p<5;p++)this.ctx.fillStyle=c[p],this.ctx.fillRect(r,i,8,8),h.font="14px Monaco, monospace",h.textAlign="start",h.textBaseline="top",h.fillStyle="#ffffff",h.fillText(l[p],r+8,i),i+=12;if(this.globals().active_mask_history){var u=Array(a).fill(0);for(p=0;p<this.globals().sampler_cache_history.length;p++)for(var _=this.globals().sampler_cache_history[p],g=0;g<a;g++)u[g]=Math.max(u[g],_[3*g+0],_[3*g+1],_[3*g+2]);var m=this.globals().active_mask_history;if(m.length>0){o("cycles:"+this.globals().clocks,0,i);var h=this.ctx;r=48;var f=i+16;for(p=0;p<m.length;p++){this.neededHeight=Math.max(this.neededHeight,i),i=f+4;for(var d=0;d<a;d++){i+=8,0==p&&o("core#"+d,0,i),i+=12;for(var b=0;b<n;b++){0==p&&(o("wave#"+b,0,i+t/2),b in this.colorMap||(this.colorMap[b]=this.getRandomColor()),this.ctx.fillStyle=this.colorMap[b],this.ctx.fillRect(38,i+t/2,4,4));for(var y=0;y<t;y++){var x=d*n*t+b*t+y;x%t==0&&(i+=4),this.ctx.fillStyle=c[m[p][x]],this.ctx.fillRect(r,i,1,1),i+=1}}i+=4;for(var v=this.globals().alu_active_history,w=0;w<s;w++){0==p&&o("ALU#"+w,0,i);var C=d*s+w;-1==v[p][C]?this.ctx.fillStyle="white":-2==v[p][C]?this.ctx.fillStyle="black":this.ctx.fillStyle=this.colorMap[v[p][C]],this.ctx.fillRect(r,i,1,6),i+=14}i+=4;var O=this.globals().sampler_cache_history,k=10*O[p][3*d+0]/u[d],z=10*O[p][3*d+1]/u[d],L=10*O[p][3*d+2]/u[d];0==p&&o("sampler",0,i);for(g=10;g>=0;g--){var j=0,E=0,R=0;g<=k&&(j=255),g<=z&&(E=255),g<=L&&(R=255),this.ctx.fillStyle="rgb("+Math.floor(j)+", "+Math.floor(E)+", "+Math.floor(R)+")",this.ctx.fillRect(r,i,1,1),i+=1}}r+=1,this.neededWidth=Math.max(this.neededWidth,r)}}}(h=this.ctx).font="14px Monaco, monospace";var M="(r, g, b) = (hits, misses, evictions)";if(h.textAlign="start",h.textBaseline="top",h.fillStyle="#ffffff",h.fillText(M,0,i+16),i+=16,this.globals().l2_metric_history){var P=this.globals().l2_metric_history;if(P.length>0){(h=this.ctx).font="14px Monaco, monospace";M="L2$";h.textAlign="start",h.textBaseline="top",h.fillStyle="#ffffff",h.fillText(M,0,i+16);f=i+32;r=48;var D=0;for(p=0;p<P.length;p++)D=Math.max(D,P[p][0],P[p][1],P[p][2]);for(p=0;p<P.length;p++){this.neededHeight=Math.max(this.neededHeight,i),i=f;var B=100*P[p][0]/D,S=100*P[p][1]/D,A=100*P[p][2]/D;for(g=100;g>=0;g--){j=0,E=0,R=0;g<=B&&(j=255),g<=S&&(E=255),g<=A&&(R=255),this.ctx.fillStyle="rgb("+Math.floor(j)+", "+Math.floor(E)+", "+Math.floor(R)+")",this.ctx.fillRect(r,i,1,1),i+=1}r+=1}this.neededWidth=Math.max(this.neededWidth,r)}}}}},{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement("div",{style:{marginLeft:0,marginRight:"40%"}},u.a.createElement("button",{onClick:this.scheduleDraw},"Render History"),u.a.createElement("button",{onClick:this.remapColors},"Shuffle Colors")),u.a.createElement("canvas",{ref:"canvas"})," ")}}]),t}(u.a.Component),z=function(e){function t(e,n){var s;return Object(a.a)(this,t),(s=Object(r.a)(this,Object(i.a)(t).call(this,e,n))).setupRaymarching=s.setupRaymarching.bind(Object(l.a)(Object(l.a)(s))),s.setupBranch_1=s.setupBranch_1.bind(Object(l.a)(Object(l.a)(s))),s.setupBranch_2=s.setupBranch_2.bind(Object(l.a)(Object(l.a)(s))),s.setupBranch_3=s.setupBranch_3.bind(Object(l.a)(Object(l.a)(s))),s.setupBranch_4=s.setupBranch_4.bind(Object(l.a)(Object(l.a)(s))),s}return Object(o.a)(t,e),Object(s.a)(t,[{key:"setupRaymarching",value:function(){this.globals.dispatchConfig={group_size:32,groups_count:2048,cycles_per_iter:1,"update graph":!1},this.globals.gpuConfig={DRAM_latency:32,DRAM_bandwidth:768,L1_size:1024,L1_latency:4,L2_size:1024,L2_latency:16,sampler_cache_size:1024,sampler_latency:16,VGPRF_per_pe:128,wave_size:32,CU_count:2,ALU_per_cu:2,waves_per_cu:4,fd_per_cu:2,ALU_pipe_len:1},this.globals.setText("jmp ENTRY\n\n; Distance function\n; In   : r32.xyz\n; Uses : r33.xyzw, r32.xyzw\n; Out  : r32.w\nDIST_FN:\n\n; Sphere_0\nsub.f32 r33.xyz, r32.xyz, f3(0.0 0.0 5.0)\nlen r33.w, r33.xyz\nsub.f32 r33.w, r33.w, f(9.0)\n\n; Sphere_1\nsub.f32 r34.xyz, r32.xyz, f3(0.0 0.0 -5.0)\nlen r34.w, r34.xyz\nsub.f32 r34.w, r34.w, f(5.0)\n\n; Smooth min\nsub.f32 r34.x, r33.w, r34.w\nmul.f32 r34.x, r34.x, f(0.2)\nmad.f32 r34.x, r34.x, f(0.5), f(0.5)\nclamp r34.x, r34.x\n; mul.f32 r34.x, r34.x, r34.x\nlerp r32.w, r34.w, r33.w, r34.x\n\nsub.f32 r34.w, r34.x, f(1.0)\nmul.f32 r34.w, r34.w, f(5.)\nmad.f32 r32.w, r34.x, r34.w, r32.w\n\n\npop_mask\n\nENTRY:\n; Figure out where we are in the screen space\nmov r0.xy, thread_id\nand r0.x, r0.x, u(255)\ndiv.u32 r0.y, r0.y, u(256)\nmov r0.zw, r0.xy\n\n; put the red color as an indiacation of ongoing work\nst u0.xyzw, r0.zw, f4(1.0 0.0 0.0 1.0)\n\n; Normalize screen coordiantes\nutof r0.xy, r0.xy\n; add 0.5 to fit the center of the texel\nadd.f32 r0.xy, r0.xy, f2(0.5 0.5)\n; normalize coordinates\ndiv.f32 r0.xy, r0.xy, f2(256.0 256.0)\n; tx * 2.0 - 1.0\nmul.f32 r0.xy, r0.xy, f2(2.0 -2.0)\nsub.f32 r0.xy, r0.xy, f2(1.0 -1.0)\n\n; Setup a simple pinhole camera\n; Camera position\nmov r1.xyz, f3(10.0 10.0 0.0)\n; Camera look vector\nmov r2.xyz, f3(-0.7071 -0.7071 0.0)\n; Camera right vector\nmov r3.xyz, f3(-0.7071 0.7071 0.0)\n; Camera up vector\nmov r4.xyz, f3(0.0 0.0 1.0)\n; Setup ray direction\nmov r5.xyz, r2.xyz\nmad.f32 r5.xyz, r0.xxx, r3.xyz, r5.xyz\nmad.f32 r5.xyz, r0.yyy, r4.xyz, r5.xyz\nnorm r5.xyz, r5.xyz\n\n; Now solve the scene\n\nmov r15.xyz, r5.xyz\nmul.f32 r15.xyz, r15.xyz, f3(0.01 0.01 0.01)\nadd.f32 r15.xyz, r15.xyz, r1.xyz\n\n;jmp LOOP_END\n\npush_mask LOOP_END\nLOOP_BEGIN:\n; if (r16.y < 16)\nlt.u32 r16.x, r16.y, u(16)\nmask_nz r16.x\n; Loop body begin\nmov r32.xyz, r15.xyz\npush_mask RET\njmp DIST_FN\nRET:\ngt.f32 r14.x, r32.w, f(0.001)\nsub.u32 r13.x, u(1), r14.x\nutof r13.x, r13.x\nmask_nz r14.x\nmad.f32 r15.xyz, r5.xyz, r32.www, r15.xyz\n\n; Loop body end\n; Increment iteration counter\nadd.u32 r16.y, r16.y, u(1)\n\njmp LOOP_BEGIN\n\nLOOP_END:\n\nmov r10.w, f(1.0)\nabs.f32 r10.xyz, r5.www\n\npush_mask L1\nmask_nz r13.x\nnorm r15.xyz, r15.xyz\nsample r10.xyzw, t0.xyzw, s0, r15.xy\npop_mask\nL1:\n; mov r5.xyz, r32.www\n; mov r16.y, u(1)\n; utof r14.x, r16.y\n; div.f32 r14.x, r14.x, f(4.0)\n\nst u0.xyzw, r0.zw, r10.xyzw\nret"),this.globals.resetGPU()}},{key:"setupBranch_1",value:function(){this.globals.dispatchConfig={group_size:32,groups_count:1,cycles_per_iter:1,"update graph":!0},this.globals.gpuConfig={DRAM_latency:32,DRAM_bandwidth:768,L1_size:1024,L1_latency:4,L2_size:1024,L2_latency:16,sampler_cache_size:1024,sampler_latency:16,VGPRF_per_pe:128,wave_size:32,CU_count:1,ALU_per_cu:1,waves_per_cu:1,fd_per_cu:1,ALU_pipe_len:1},this.globals.setText("; uint lane_id = get_lane_id();\n    mov r0.x, lane_id\n; if (lane_id & 1) {\n    push_mask BRANCH_END\n    and r0.y, r0.x, u(1)\n    mask_nz r0.y\nLOOP_BEGIN:\n    ; // Do smth\n     mov r0.x, r0.x\n     mov r0.x, r0.x\n     mov r0.x, r0.x\n     mov r0.x, r0.x\n     mov r0.x, r0.x\n     \n    pop_mask                ; pop mask and reconverge\nBRANCH_END:\n    ; // Do some more\n    ret"),this.globals.resetGPU()}},{key:"setupBranch_2",value:function(){this.globals.dispatchConfig={group_size:32,groups_count:1,cycles_per_iter:1,"update graph":!0},this.globals.gpuConfig={DRAM_latency:32,DRAM_bandwidth:768,L1_size:1024,L1_latency:4,L2_size:1024,L2_latency:16,sampler_cache_size:1024,sampler_latency:16,VGPRF_per_pe:128,wave_size:32,CU_count:1,ALU_per_cu:1,waves_per_cu:1,fd_per_cu:1,ALU_pipe_len:1},this.globals.setText("; uint lane_id = get_lane_id();\n    mov r0.x, lane_id\n; for (uint i = lane_id; i < 16; i++) {\n    push_mask LOOP_END\nLOOP_PROLOG:\n    lt.u32 r0.y, r0.x, u(16)\n    add.u32 r0.x, r0.x, u(1)\n    mask_nz r0.y\nLOOP_BEGIN:\n    ; // Do smth\n    jmp LOOP_PROLOG\nLOOP_END:\n    ; // }\n    ret"),this.globals.resetGPU()}},{key:"setupBranch_3",value:function(){this.globals.dispatchConfig={group_size:32,groups_count:1,cycles_per_iter:1,"update graph":!0},this.globals.gpuConfig={DRAM_latency:32,DRAM_bandwidth:768,L1_size:1024,L1_latency:4,L2_size:1024,L2_latency:16,sampler_cache_size:1024,sampler_latency:16,VGPRF_per_pe:128,wave_size:32,CU_count:1,ALU_per_cu:1,waves_per_cu:1,fd_per_cu:1,ALU_pipe_len:1},this.globals.setText("    mov r0.x, lane_id\n    lt.u32 r0.y, r0.x, u(16)\n    ; if (lane_id > 16) {\n    br_push r0.y, ELSE, CONVERGE\nTHEN:\n    ; // Do smth\n    mov r0.x, r0.x\n    mov r0.x, r0.x\n    mov r0.x, r0.x\n    mov r0.x, r0.x\n    mov r0.x, r0.x\n\n    pop_mask\n\n    ; } else {\nELSE:\n    ; // Do smth else\n    mov r0.x, r0.x\n    mov r0.x, r0.x\n    mov r0.x, r0.x\n    mov r0.x, r0.x\n    mov r0.x, r0.x\n\n    pop_mask\n    ; }\nCONVERGE:\n    ret"),this.globals.resetGPU()}},{key:"setupBranch_4",value:function(){this.globals.dispatchConfig={group_size:32,groups_count:1,cycles_per_iter:1,"update graph":!0},this.globals.gpuConfig={DRAM_latency:32,DRAM_bandwidth:768,L1_size:1024,L1_latency:4,L2_size:1024,L2_latency:16,sampler_cache_size:1024,sampler_latency:16,VGPRF_per_pe:128,wave_size:32,CU_count:1,ALU_per_cu:1,waves_per_cu:1,fd_per_cu:1,ALU_pipe_len:1},this.globals.setText("    mov r4.w, lane_id\n    utof r4.xyzw, r4.wwww\n    mov r4.z, wave_id\n    utof r4.z, r4.z\n    add.f32 r4.xyzw, r4.xyzw, f4(0.0 0.0 0.0 1.0)\n    lt.f32 r4.xy, r4.ww, f2(16.0 8.0)\n    utof r4.xy, r4.xy\n    br_push r4.x, LB_1, LB_2\n    mov r0.x, f(666.0)\n    br_push r4.y, LB_0_1, LB_0_2\n    mov r0.y, f(666.0)\n    pop_mask\nLB_0_1:\n    mov r0.y, f(777.0)\n    pop_mask\nLB_0_2:\n    pop_mask\nLB_1:\n    mov r0.x, f(777.0)\n\n    ; push the current wave mask\n    push_mask LOOP_END\nLOOP_PROLOG:\n    lt.f32 r4.x, r4.w, f(32.0)\n    add.f32 r4.w, r4.w, f(1.0)\n    ; Setting current lane mask\n    ; If all lanes are disabled pop_mask is invoked\n    ; If mask stack is empty then wave is retired\n    mask_nz r4.x\nLOOP_BEGIN:\n    jmp LOOP_PROLOG\nLOOP_END:\n    pop_mask\n    \n    \nLB_2:\n    mov r4.y, lane_id\n    utof r4.y, r4.y\n    ret"),this.globals.resetGPU()}},{key:"timer",value:function(){if(this.globals.wasm&&this.globals.run)for(var e=0;e<this.globals.dispatchConfig.cycles_per_iter;e++)this.globals.wasm.guppy_clock()?(this.globals.clocks+=1,this.globals.setClocks(this.globals.clocks),this.globals.active_mask_history.push(this.globals.wasm.guppy_get_active_mask()),this.globals.alu_active_history.push(this.globals.wasm.guppy_get_valu_active()),this.globals.sampler_cache_history.push(this.globals.wasm.guppy_get_sampler_cache_metrics()),this.globals.l2_metric_history.push([this.globals.wasm.guppy_get_gpu_metric("L2 hit"),this.globals.wasm.guppy_get_gpu_metric("L2 miss"),this.globals.wasm.guppy_get_gpu_metric("L2 evict")]),this.globals.updateMemory(),this.globals.dispatchConfig["update graph"]&&this.globals.updateCanvas()):this.globals.run=!1}},{key:"componentDidMount",value:function(){var e=this;this.globals={},this.globals.dispatchConfig={group_size:1,groups_count:1,cycles_per_iter:1,"update graph":!0},this.globals.gpuConfig={DRAM_latency:1,DRAM_bandwidth:1,L1_size:0,L1_latency:0,L2_size:1,L2_latency:1,sampler_cache_size:1,sampler_latency:1,VGPRF_per_pe:1,wave_size:1,CU_count:1,ALU_per_cu:1,waves_per_cu:1,fd_per_cu:1,ALU_pipe_len:1},this.globals.wasm=null,this.globals.clocks=0,this.globals.setupBranch_1=this.setupBranch_1,this.globals.setupBranch_2=this.setupBranch_2,this.globals.setupBranch_3=this.setupBranch_3,this.globals.setupBranch_4=this.setupBranch_4,this.globals.setupRaymarching=this.setupRaymarching,this.globals.r_images=[],this.globals.active_mask_history=null,this.globals.sampler_cache_history=null,this.globals.l2_metric_history=null,this.globals.alu_active_history=null,this.intervalId=setInterval(this.timer.bind(this),1);var t={content:[{type:"row",content:[{type:"column",content:[{type:"react-component",component:"TextEditor",title:"TextEditor",props:{globals:function(){return e.globals}}},{type:"stack",content:[{type:"react-component",component:"Bindings",title:"Bindings",props:{globals:function(){return e.globals}}},{type:"react-component",component:"Parameters",title:"Parameters",props:{globals:function(){return e.globals}}}]}]},{type:"stack",content:[{type:"react-component",component:"Graphs",title:"Graphs",props:{globals:function(){return e.globals}}},{type:"react-component",component:"Readme",title:"Readme",props:{globals:function(){return e.globals}}}]}]}]},n=new h.a(t,this.layout);this.layout=n;var a=this.globals;this.globals.resetGPU=function(){a.run=!1,a.wasm.guppy_create_gpu_state(JSON.stringify(a.gpuConfig)),a.wasm.guppy_init_framebuffer(256,256),a.active_mask_history=[],a.alu_active_history=[],a.sampler_cache_history=[],a.l2_metric_history=[],a.clocks=0,a.updateMemory&&a.updateMemory(),a.updateParameters&&a.updateParameters(),a.updateCanvas&&a.updateCanvas()},x.then(function(t){n.updateSize(),e.globals.wasm=t,e.setupBranch_1()}),n.registerComponent("Graphs",k),n.registerComponent("TextEditor",v),n.registerComponent("Parameters",w),n.registerComponent("Bindings",O),n.registerComponent("Readme",C),n.init(),window.React=u.a,window.ReactDOM=g.a,window.addEventListener("resize",function(){n.updateSize()})}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"goldenLayout",ref:function(t){return e.layout=t}})}}]),t}(u.a.Component);n(113);g.a.render(u.a.createElement(z,null),document.getElementById("root"))}},[[114,1,2]]]);
//# sourceMappingURL=main.c8358ee6.chunk.js.map